# README Update for SynthGen Agent

## Overview
This repository contains a full pipeline for fine-tuning models using synthetic data generated by the SynthGen Agent. It supports training, evaluation, Hugging Face model uploads, and task submissions through the FLock API.

---

## Quickstart

### **1. Install Dependencies**
```bash
conda create -n training-node python==3.10
conda activate training-node
pip install -r requirements.txt
```

---

### **2. File Structure**

- `dataset.py`: Contains classes for data processing and synthetic data generation.
- `demo.py`: Implements LoRA fine-tuning using synthetic and real data.
- `full_automation.py`: Automates dataset download, model training, evaluation, and task submission.
- `flock_api.py`: Interfaces with FLock's API for task management.
- `training_args.yaml`: Stores hyperparameter configurations.

---

### **3. Run the Full Automation Script**
```bash
TASK_ID=<task-id> FLOCK_API_KEY="<your-flock-api-key>" HF_TOKEN="<your-hf-token>" CUDA_VISIBLE_DEVICES=0 HF_USERNAME="your-hf-user-name" python full_automation.py
```

### **4. Custom Training with `demo.py`**
```bash
HF_TOKEN="<your-hf-token>" CUDA_VISIBLE_DEVICES=0 python demo.py
```

---

### **5. Model Submission to Hugging Face Hub**
Follow Hugging Face's official documentation to upload models and commit changes:
- [Model Uploading Guide](https://huggingface.co/docs/hub/models-uploading)

---

### **6. Task Submission**
Use the provided `submit_results_with_metrics()` method in `flock_api.py` to send training results with evaluation metrics.

```bash
curl --location 'https://fed-ledger-prod.flock.io/api/v1/tasks/submit-result' \
--header 'flock-api-key: <your-api-key>' \
--header 'Content-Type: application/json' \
--data '{
    "task_id": 29,
    "data": {
        "hg_repo_id": "your_repo_id",
        "base_model": "base_model_name",
        "gpu_type": "your_gpu_type",
        "revision": "commit_hash",
        "metrics": {
            "accuracy": 0.95,
            "f1_score": 0.93
        }
    }
}'
```

---

### **7. Task Management Instructions**
- Stake tasks on [FLock Training Platform](https://train.flock.io/stake).
- Retrieve your Task ID and proceed with submission.

---

### **8. Hyperparameter Configuration**
- Adjust settings in `training_args.yaml` to customize training parameters for each model.
